#HTTP #WEB
# HTTP (HyperText Transfer Protocol)
## 정의
- 월드 와이드 웹(WWW)에서 통신하는 데 사용하는 프로토콜 프로그램
## 작동 방식
### 웹 클라이언트와 서버
- **웹 서버**
    - 웹 콘텐츠는 웹 서버에 존재한다. 웹 서버는 HTTP 프로토콜로 의사소통하기 때문에 보통 HTTP 서버라고 불린다.
    - 인터넷의 데이터를 저장하고, HTTP 클라이언트가 요청한 데이터를 제공한다.
    - 데이터의 타입, 길이 등의 정보와 함께 HTTP 응답에 실어서 클라이언트에게 보낸다.

- 클라이언트는 서버에게 HTTP 요청을 보내고 서버는 요청된 데이터를 HTTP 응답으로 돌려준다.

- **웹 브라우저**
    - 서버에게 HTTP 객체를 요청하고 사용자의 화면에 보여준다.
### 리소스
- **웹 서버**
    - 웹 리소스를 관리하고 제공한다.
- **웹 리소스**
    - 웹 서버 파일 시스템의 정적 파일
        - 텍스트 파일, HTML 파일, 마이크로소프트 워드 파일, 어도비 아크로벳 파일, JPEG 이미지 파일, AVI 동영상 파일, 그외 모든 종류의 파일을 포함
    - 반드시 정적 파일이어야 할 필요는 없다.
    - 웹에 콘텐츠를 제공하는 모든 것을 말한다.
    - 미디어 타입
        - HTTP는 웹에서 전송되는 객체의 각각에 신중하게 MIME 타입이라는 데이터 포멧 라벨을 붙인다.
        - MIME(Multipurpose Internet Mail Extensions), 다목적 인터넷 메일 확장
            - 이메일에서 워낙 잘 동작했기 때문에, HTTP에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 채택
            - 사선(/)으로 구분된 주 타입(primary object type)과 부 타입(specific subtype)으로 이루어진 문자열 라벨
            - text/html, text/plain, image/jpeg, image/gif
- **URI**
    - 서버 리소스 이름은 통합 자원 식별자(uniform resource identifier), 혹은 URI로 불린다.
    - 정보 리소스를 고유하게 식별하고 위치를 지정할 수 있다.
    - URL과 URN이 있다.
	![[URI.jpg]]
- **[[HTTP/URL과 리소스|URL]]**
    - 통합 자원 지시자(uniform resource locator, URL), 리소스 식별자의 가장 흔한 형태
    - 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.
    - 3 부분으로 이루어진 표준 포멧을 따른다.
        1. 스킴(scheme) : 리소스에 접근하기 위해 사용되는 프로토콜을 서술한다. (HTTP://)
        2. 서버의 인터넷 주소 : [www.joes-hardware.com](http://www.joes-hardware.com)
        3. 웹 서버의 리소스를 가리킨다. /specials/saw-blade.gif
    - 오늘날 대부분은 URI는 URL을 사용한다.
- **URN**
    - 통합 자원 이름(uniform resource name, URN)
    - 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 한다.
    - 위치 독립적인 URN은 리소스를 여기저기로 옮기더라도 문제없이 동작한다.
    - 다음의 URN은 인터넷 표준 문서 ‘RFC 2141’가 어디에 있거나 상관없이(심지어 여러군데에 복사되었더라도) 그것을 지칭하기 위해 사용할 수 있다. → urn:ietf:rfc:2141
### 트랜잭션
- HTTP 트랜잭션은 요청 명령과 응답 결과로 구성되어 있다. 이 상호작용은 HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 이용해 이루어진다.
- **클라이언트** : HTTP 요청 메세지는 명령과 URI를 포함한다.
- **서버** : HTTP 응답 메세지는 트랜잭션의 결과를 포함한다.
- **메서드**
    - HTTP는 HTTP 메서드라고 불리는 여러 가지 종류의 요청 명령을 지원한다.
    - 모든 HTTP 요청 메세지는 한 개의 메서드를 갖는다.
    - 메서드는 서버에게 어떤 동작이 취해져야 하는지 말해준다.
    - GET : 서버에서 클라이언트로 지정한 리소스를 보내라.
    - PUT : 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라.
    - DELETE : 지정한 리소스를 서버에서 삭제하라.
    - POST : 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라.
    - HEAD : 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라.
- **상태 코드**
    - 모든 HTTP 응답 메세지는 상태 코드와 함께 반환된다.
    - 클라이언트에게 요청이 성공했는지 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자다.
    - 200 : 좋다. 문서가 바르게 반환되었다.
    - 302 : 다시 보내라. 다른 곳에 가서 리소스를 가져가라.
    - 404 : 없음. 리소스를 찾을 수 없다.
    - HTTP는 각 숫자 상태 코드에 텍스트로 된 “사유 구절(reason phrase)”도 함께 보낸다.
        - 이 구분은 단지 설명만을 위해서 포함된 것일 뿐 실제 응답 처리에는 숫자로 된 코드가 사용된다.
- 웹페이지는 여러 객체로 이루어질 수 있다.
    - 애플리케이션은 보통 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다.
    - 페이지 레이아웃을 서술하는 HTML ‘뼈대’를 한 번의 트랜잭션으로 가져온 뒤, 첨부된 이미지, 그래픽 조각, 자바 애플릿 등을 가져오기위해 추가로 HTTP 트랜잭션들을 수행한다.
    - 웹페이지는 첨부된 리소스들에 대해 각각 별개의 HTTP 트랜잭션을 필요로 한다.
### 메시지
- 단순한 줄 단위의 문자열.
- **요청 메시지** : 클라이언트 → 서버로 보낸 HTTP 메시지
- **응답 메시지** : 서버 → 클라이언트로 가는 메시지
1. **시작줄**
    1. 요청 : 무엇을 해야하는지 ( GET /test/hi-there.txt HTTP/1.0 )
    2. 응답 : 무슨 일이 일어났는지 ( HTTP/1.0 200 OK )
2. **헤더**
    1. 시작줄 다음에는 0개 이상의 헤더 필드가 이어진다.
    2. 각 헤더 필드는 쌍점(:)으로 구분되어 있는 하나의 이름과 하나의 값으로 구성된다.
    3. 헤더는 빈 줄로 끝난다.
    4. ( Accept: test/* )
3. **본문**
    1. 필요에 따라서 있다.
    2. 어떤 종류의 데이터도 들어갈 수 있다.
    3. 요청 : 웹 서버로 데이터를 실어 보낸다.
    4. 응답 : 클라이언트로 데이터를 반환
    5. 문자열이며 임의의 이진 데이터를 포함할 수 있다. (이미지, 비디오, 오디오 트랙, 응용 소프트웨어), 텍스트
    6. ( Hi! I’m a message! )
- 간단한 메시지의 예
    
	![[transaction.jpg]]
    
    - 응답 본문의 길이는 Content-Length 헤더에, 문서의 MIME 타입은 Content-Type 헤더에 적혀있다.
### TCP 커넥션
- Transmission Control Protocol, 전송제어 프로토콜)
### TCP/IP
- HTTP는 애플리케이션 계층 프로토콜이다. 네트워크통신의 핵심적인세부사항에 대해서 TCP/IP에게 맡긴다.
- **TCP가 제공하는 것**
    - 오류 없는 데이터 전송
    - 순서에 맞는 전달( 데이터는 언제나 보낸 순서대로 도착한다 )
    - 조각나지 않는 데이터 스트림( 언제든 어떤 크기로든 보낼 수 있다. )
- TCP와 IP가 층을 이루는, 패킷 교환 네트워크 프로토콜의 집합이다.
- HTTP 프로토콜은 TCP 위의 계층이다. HTTP는 자신의 메시지 데이터를 전송하기 위해 TCP를 사용한다.
- TCP는 IP 위의 계층이다.
```
HTTP 네트워크 프로토콜 스택

HTTP : 애플리케이션 계층
TCP : 전송 계층
IP : 네트워크 계층
네트워크를 위한 링크 인터페이스 : 데이터 링크 계층
물리적인 네트워크 하드웨어 : 물리 계층
```
### 접속, IP주소 그리고 포트번호
- HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, IP주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.
- 서버 컴퓨터에 대한 IP 주소와 서버에서 실행 중인 프로그램이 사용 중인 포트번호가 필요하다.
- URL을 사용해서 알 수 있다.
## 웹의 구성요소
- 프록시 : 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시 : 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이 : 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널 : 단순히 HTTP 통신을 전달하기만 하는 특별한 프록시
- 에이전트 : 자동화된 HTTP요청을 만드는 준지능적( semi-intelligent ) 웹클라이언트
### 프록시
- 웹 보안, 애플리케이션 통합, 성능 최적화를 위한 중요한 구성요소
- 클라이언트의 모든 HTTP 요청을 받아 서버에 전달한다. (대개 요청을 수정한 뒤에)
- 요청과 응답을 필터링 한다.
### 캐시
- 웹캐시와 캐시 프록시는 자신을 거쳐 가는 문서들 중 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프록시 서버
### 게이트웨이
- 다른 서버들의 중개자로 동작하는 특별한 서버
- HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다.
- 언제나 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룬다.
- 클라이언트는 알아채지 못한다.
### 터널
- 두 커넥션 사이에서 날(raw) 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션이다.
- 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 전송해주기 위해서 사용된다.
- 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로써 웹 트래픽만 허용하는 사내 방화벽을 통과시키는 것이 있다.
### 에이전트
- 사용자 에이전트(혹은 그냥 에이전트)는 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다.
## 추가 정보
### HTTP 프로토콜에 대한 정보
- HTTP Pocket Reference
    - 이 책은 HTTP에 대해 간략하게 소개하며, HTTP 트랜잭션을 구성하는 각 헤더와 상태코드에 대한 설명을 찾아보기 쉬운 형태로 제공한다.
- [https://www.w3.org/Protocols/](https://www.w3.org/Protocols/)
    - HTTP 프로토콜에 대한 여러 훌륭한 링크를 포함하고 있다.
- [www.ietf.org/rfc/rfc2616.txt](http://www.ietf.org/rfc/rfc2616.txt)
    - RFC 2616, “Hypertext Transfer Protocol—HTTP/1.1”은 HTTP/1.1의 현재 버전에 대한 공식 명세


***
#### 연결 노트
1. [[HTTP/URL과 리소스|URL과 리소스]]
