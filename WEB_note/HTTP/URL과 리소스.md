#HTTP #URL
# URL과 리소스
- **URL (Uniform Resource)** 은 인터넷의 리소스를 가리키는 표준이름이다.
- URL은 전자정보 일부를 가리키고 그것이 어디에 있고 어떻게 접근할 수 있는지 알려준다.
## 인터넷의 리소스 탐색하기
- [[WEB_note/HTTP/URN|URN]]은 현재 그 리소스가 어디에 존재하든 상관없이 그 이름만으로 리소스를 식별한다.
- **URL**은 리소스가 어디 있는지 설명해서 리소스를 식별한다.
- **"http://www.joes-hardware.com/seasonal/index-fall.html"** 이라는 URL을 불러오고 싶다고 해보자.
	- URL의 첫 부분인 http는 URL의 **스킴**이다. 스킴은 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다.
	- URL의 두 번째 부분인 www.joes-hardware.com은 서버의 위치다. 이는 웹 클라이언트가 리소스가 어디에 호스팅 되어 있는지 알려준다.
	- URL의 세 번째 부분인 /seasonal/index-fall.html은 리소스의 경로다. 경로는 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려준다.
	![[image file/IMG_01425F8208AE-1.jpeg]]
- 대부분의 URL은 동일하게 **'스킴://서버위치/경로'** 구조로 이루어져 있다.
## URL 문법
- URL 문법은 **스킴에 따라서 달라진다.**
- URL은 일반 URL 문법을 따르며, 서로 다른 URL 스킴도 형태와 문법 면에서 매우 유사하다.
- 대부분의 URL 스킴의 문법은 일반적으로 9개 부분으로 나뉜다.
	```text
	<스킴>://<사용자 이름>:<비밀번호>@<호스트>:포트/<경로>;<파라미터>?<질의>#<프래그먼트>
	```
- 이 모든 컴포넌트를 가지는 URL은 거의 없다.
- URL의 가장 중요한 세 가지 컴포넌트는 **스킴, 호스트, 경로**다.
### 스킴: 사용할 프로토콜
- **스킴**은 주어진 리소스에 어떻게 접근하는지 알려주는 중요한 정보다.
- URL을 해석하는 애플리케이션이 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지 알려준다.
- 스킴 컴포넌트는 알파벳으로 시작해야 하고 URL의 나머지 부분들과 첫 번째 **':'** 문자로 구분한다.
- 대소문자를 구분하지 않는다.
### 호스트와 포트
- 리소스를 호스팅하고 있는 장비와 그 장비 내에서 리소스에 접근할 수 있는 서버가 어디에 있는지 알아야 한다.
- URL의 호스트와 포트 컴포넌트는 그 두 가지 정보를 제공해준다.
- **호스트 컴포넌트**는 접근하려고 하는 리소스를 가지고 있는 인터넷상의 호스트 장비를 가리킨다.
- **포트 컴포넌트**는 서버가 열어놓은 네트워크 포트를 가리킨다. 내부적으로 TCP 프로토콜을 사용하는 HTTP는 기본 포트로 80을 사용한다.
### 사용자 이름과 비밀번호
- 많은 서버가 자신이 가지고 있는 데이터에 접근을 허용하기 전에 사용자 이름과 비밀번호를 요구한다.
- FTP 서버가 좋은 예다.
- ftp://joe::joespasswd@www.joes-hardware.com/sales_info.txt
- 애플리케이션이 FTP와 같이 사용자 이름과 비밀번호를 요구하는 URL스킴을 사용한다면, 그 값들이 삽입되어 있지 않을 경우 기본 사용자 이름과 비밀번호 값을 넣어놓을 것이다.
- **'@'** 문자는 URL로부터 사용자 이름과 비밀번호 컴포넌트를 분리한다.
- **':'** 문자는 사용자 이름과 비밀번호를 분리한다.
### 경로
- **경로 컴포넌트**는 리소스가 서버의 어디에 있는지 알려준다.
- HTTP URL에서 경로 컴포넌트는 **'/'** 문자를 기준으로 경로조각으로 나뉜다.
- 각 경로조각은 자체만의 파라미터 컴포넌트를 가질 수 있다.
### 파라미터
- 많은 스킴이 객체에 대한 호스트 및 경로 정보만으로는 리소스를 찾지 못한다.
- URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요하다.
- **파라미터 컴포넌트**는, 애플리케이션이 서버에 정확한 요청을 하기 위해 필요한 **입력 파라미터를 받는데 사용**한다.
- 이 컴포넌트는 이름/값 쌍의 리스트로 URL 나머지 부분들로부터 **';'** 문자로 구분하여 URL에 기술한다.
```text
ftp://prep.ai.mit.edu/pub/gnu;type=d
```
- 이 경우 이름은 'type'이고, 값은 'd'인 type=d라는 단 한 개의 파라미터를 전달한다.
```
http://www.joes-hardware.com/hammers;sale=false/index.html;graphics=true
```
- 위 URL에는 hammers와 index.html이라는 두 개의 경로조각이 있다. 각각의 경로조각은 파라미터를 가진다.
### 질의 문자열
- 데이터베이스 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질문이나 질의를 받을 수 있다.
```text
http://www.joes-hardware.com/inventory-check.cgi?item=12731
```
- **'?'** 오른쪽이를 질의 컴포넌트라고 부른다.
- 특정 문자들을 제외하고는 질의 컴포넌트 포멧에 제약사항은 없다.
- 편의상 많은 게이트웨이가 '&'로 나뉜 '이름=값' 쌍 형식의 질의 문자열을 원한다.
### 프래그먼트
- HTML 같은 리소스 형식들은 본래의 수존보다 더 작게 나뉠 수 있다.
- 리소스의 특정 부분을 가리킬 수 있도록, URL은 리소스 내의 조각을 가리킬 수 있는 **프래그먼트 컴포넌트**를 제공한다.
- URL은 HTML 문서에 있는 특정 이미지나 일부분을 가리킬 수 있다.
- 프래그먼트는 URL의 오른쪽에 **'#'** 문자에 이어서 온다.
```
http://www.joes-hardware.com/tools.html#drills
```
- drills라는 프래그먼트는 죠의 컴퓨터 가게 웹 서버에 위치한 /tools.html 웹페이지의 일부를 가리킨다. 그 부분을 'drills'라고 기술하였다.
- 일반적으로 HTTP 서버는 객체의 일부가 아닌 전체만 다루기 때문에, 클라이언트는 서버에 프래그먼트를 전달하지 않는다. 브라우저가 서버로부터 전체 리소스를 내려받은 후, 프래그먼트를 사용하여 당신이 보고자 하는 리소스의 일부를 보여준다.
## 단축 URL
- 웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다.
- **상대 URL**은 리소스 안에 있는 리소스를 간결하게 서술하는데 사용할 수 있다.
### 상대 URL
- URL은 **상대 URL과 절대 URL** 두 가지로 나뉜다.
- 절대 URL은 리소스에 접근하는데 필요한 모든 정보를 가지고 있다. **상대 URL**은 모든 정보를 담고 있지는 않다.
- 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는, **기저(base)** 라고 하는 다른 URL을 사용해야 한다.
- **상대 URL**은 URL을 짥게 표가하는 방식이다.
```html
<p> joe;s Hardware Online ... <A HERF="./hammers.html">hammers
```
- HTML 문서에는 **hammers.html** URL을 가리키는 하이퍼링크가 있다. 이 URL은 올바른 문법의 상대 URL이다.
- 이는 문서의 URL을 기준으로 상대경로를 해석될 수 있다.
- HTML 작성자는 URL에 스킴과 호스트 그리고 다른 컴포넌트를 모두 입력하지 않아도 된다.
- 그 정보는 컴포넌트가 포함된 리소스의 기저 URL에서 알아낼 수 있다.
- 스킴은 http이고 호스트는 http://www.joes-hardware.com 라는 것을 추측할 수 있다.
```html
http://www.joes-hardware.com/hammers.html
```
- 상대 URL은 프래그먼트이거나 URL의 일부다.
- URL을 처리하는 브라우저 같은 애플리케이션은 상대 URL과 절대 URL간에 상호 변환을 할 수 있어야 한다.
- 상대 URL을 사용하면 리소스 집합(HTML 페이지 같은)을 쉽게 변경할 수 있다.
- 새로운 기저 URL에 의해서 해석될 것이기 때문에 위치를 변경하더라도 잘 동작할 것이다.
#### 기저 URL
- 기저 URL은 상대 URL의 기준이 된다.
- 그것을 가져오는 몇가지 방법이 있다.
##### 리소스에서 명시적으로 제공
- 예를 들어 HTML문서에서는 기저 URL을 가리키는
```html
<BASE>HTML 태그를 기술할 수 있다.
```
##### 리소스를 포함하고 있는 기저 URL
- 기저 URL이 명시되지 않은 리소스에 포함된 경우, 해당 리소스의 URL을 기저 URL로 쓸 수 있다.
##### 기저 URL이 없는 경우
- 기저 URL이 없는 경우도 있다. 보통 이런 경우는 절대 URL만으로 이루어져 있다는 뜻이다. 하지만 불완전하거나 깨진 URL일 수도 있다.
##### 상대 참조 해석하기
- 상대 URL을 절대 URL로 변환하기 위한 다음 단계는 상대 URL과 기저 URL을 각각의 컴포넌트 조각으로 나누는 것이다.
- 컴포넌트 단위로 분리한다는 점에서 이 작업을 **URL 분해하기**라고 부리기도 한다.
- 변환을 끝내기 위해 아래에서 서명하고 있는 알고리즘을 사용할 수 있다.
- 이 알고리즘은 RFC 1808에 최초로 기술되었고, 그 이후 RFC 2396에 포함되었다.
![[image file/File (2).jpg]]
### URL 확장
- 어떤 브라우저들은 URL을 입력한 다음이나 입력하고 있는 동안에 자동으로 URL을 확장한다.
#### 호스트 명 확장
- 호스트 명 확장 기능을 지원하는 브라우저는 단순한 **휴리스틱만**을 사용해서 입력한 호스트 명을 전체 호스트 명으로 확장할 수 있다.